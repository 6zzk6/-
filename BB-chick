#include<bits/stdc++.h>
#include<windows.h>
#include<dos.h>
#include<time.h>
#include<conio.h>

using namespace std;

int n=1,dian=100;

inline void save()                      //保存    
{
    ofstream outFile;
    outFile.open("D:\\save.txt");
    outFile<<n;
    outFile.close();
}

inline void init()                      //读入   
{
    ifstream inFile;
    inFile.open("D:\\save.txt");
    inFile>>n;
    inFile.close();
}

inline void in()                        //初始化
{
    for(int i=1;i<=40;i++)
    {
        if(i%4==1) cout<<"\n\n\n ◇◆\n ◆◆\n";
        if(i%4==2) cout<<"\n\n\n ◆◇\n ◆◆\n";
        if(i%4==3) cout<<"\n\n\n ◆◆\n ◆◇\n";
        if(i%4==0) cout<<"\n\n\n ◆◆\n ◇◆\n";
        cout<<"\n 加载中..."<<endl<<endl<<endl<<endl<<endl<<endl<<endl<<endl<<endl<<endl;
        cout<<"抵制不良游戏 拒绝盗版游戏 注意自我保护 谨防受骗上当"<<endl;
        cout<<"适度游戏益脑 沉迷游戏伤身 合理安排时间 享受健康生活"<<endl;
        Sleep(100);
        system("cls");
    }
}

inline void shezhi()                    //设置 
{
	char a;
	system("mode con cols=75 lines=30");
    system("title 哔哔机game");
    printf("0=黑色       8=灰色\n");
    printf("1=蓝色       9=淡蓝色\n");
    printf("2=绿色       A=淡绿色\n");
    printf("3=湖蓝色     B=淡浅绿色\n");
    printf("4=红色       C=淡红色\n");
    printf("5=紫色       D=淡紫色\n");
    printf("6=黄色       E=淡黄色\n");
    printf("7=白色       F=亮白色\n");
    char ak[99999]=" 0",bk[99999]="color ";
    puts("请选择需要的背景色和前景色:");
    printf("背景色:");
    ak[0]=getche();
    printf("\n");
    printf("前景色:");
    ak[1]=getche();
    system(strcat(bk,ak));
    system("cls");	
}

inline void bibi()                      //哔哔 
    //内容自定
}

inline void prbi()                      //等级 
{
	cout<<"大家好！我是 哔哔机 v"<<n<<".0 ";
	switch(n)
	{
		case 1:printf("高效"); break;
		case 2:printf("节能"); break;
		case 3:printf("自动"); break;
	}
	puts("哔哔机。");
	puts("====================================");
}

inline void chongdian()                 //充电 
{
		int i=dian;
		while(i<100)
		{ 
		    system("cls");
		    prbi();
            puts("====================================");
			puts("充电中……");
		    Sleep(1);
			i++;
			cout<<i<<'%';
			Sleep(100); 
		} 
		puts("电量已满！");
		Sleep(100);
		system("cls");
		dian=i;
} 

inline void qita()                      //其他 
{
	system("cls");
	prbi();
    puts("====================================");
	switch(n)
	{
		case 2:
		{
			puts("[1] 查看电量 [2] 返回 [3] 修改颜色");
		}break;
		default:
		{	
		    system("cls");
	        prbi();
            puts("===================================="); 
            puts("[1] 哔哔 [2] 升级 [3] 退出 [4] 其他 ");
            if(n!=1) puts(" [4] 其他"); 
            if(n==1) cout<<endl;
     	}
    }
}

inline void qita_1()                    //其他（执行） 
{
	switch(n)
	{
		case 2:
		{
			int b;
			scanf("%d",&b);
			switch(b)
			{
				case 1:
				{
					system("cls");
	                prbi();
                    cout<<"电量："<<dian<<"%"<<endl;
                    puts("[2] 返回"); 
                    int s;
                    while(s!=2)
					{
						system("cls");
						prbi();
                        cout<<"电量："<<dian<<"%"<<endl;
                        puts("[2] 返回");
					    cin>>s;
				    }
				}break;
				
				case 2:return;break;
				
				case 3:shezhi();
				
				default:
				{
					system("cls");
	                prbi();
					puts("[1] 查看电量 [2] 返回");	
				} 
			}
		}
	}
}

void bibiji()                           //哔哔机 
{   
    save();
    system("cls");
    if(dian<=0)                         //电量控制 
	{
	    puts("哔哔机没电了！请按[1]充电！");
	    puts("===========================");
	    int x=0;
	    while(x!=1)
		{
			system("cls");
			puts("哔哔机没电了！请按[1]充电！");
	        puts("===========================");
	        Sleep(2000);
		    cin>>x;
	    }
	    chongdian();
    }
    if(dian>0) 
	{
	    if(n>1) dian=dian-1;
        else dian=dian-10;
    }
    
    int ch; 
    prbi();
    cout<<"[1] 哔哔 [2] 升级 [3] 退出";
    if(n!=1) puts(" [4] 降级 [5] 其他"); 
    if(n==1) cout<<endl;
	scanf("%d",&ch);
	
	switch(ch)
	{
	case 1:                             //哔哔 
	{
		system("cls");
		prbi();
        bibi();
        system("cls");
        bibiji();
	}break;
	
	case 2:                             //升级 
	{
		int i;
		while(i<100)
		{ 
		    system("cls");
		    prbi();
			puts("升级中……");
		    Sleep(1);
			i++;
			cout<<i<<'%';
			Sleep(100); 
		} 
		n++;
		puts("升级成功！");
		Sleep(100);
		system("cls");
        bibiji();
	}break;
	
	case 3:                             //退出 
	{
		save();
		return;
    }break;
	  
    case 4:                             //降级
	if(n==1)
	{
		system("cls");
		prbi();
        cout<<"[1] 哔哔 [2] 升级 [3] 退出";	
        bibiji();
	}
	else 
	{
		int i;
		while(i<100)
		{ 
		    system("cls");
		    prbi();
			puts("降级中……");
		    Sleep(1);
			i++;
			cout<<i<<'%';
			Sleep(100); 
			system("cls");
		} 
		n--;
		puts("降级成功！");
		Sleep(100);
		system("cls");
        bibiji();
	}break;
	
	case 5:                             //其他 
	{ 
	     if(n==1)
	     {
	     	 system("cls");
	         prbi();
             cout<<"[1] 哔哔 [2] 升级 [3] 退出 [4] 其他";
             if(n!=1) puts(" [4] 其他"); 
             if(n==1) cout<<endl;
         }
		 if(n>1)
		 {
		     qita();
		     qita_1();
		 } 
	}break;
    }
    bibiji();
}

int main()
{
	 shezhi();
	 init();
	 in();
    bibiji();
    return 0;
}
